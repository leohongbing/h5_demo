<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Title</title>
</head>
<body>
<script type="text/javascript">
  /**
   * 被观察者/主题
   * */
  class Subject {
    constructor(state) {
      this.state = state
      this.list = []
    }
    add() {
      this.list.push(...arguments)
    }
    remove(o) {
      this.list.splice(this.list.indexOf(o), 1)
    }
    notify() {
      this.list.forEach(o => o.update())
    }
    setState(state) {
      this.state = state
      this.notify()
    }
  }

  /**
   * 观察者
   * */
  class Observe {
    constructor(name) {
      this.name = name
    }
    update() {
      console.log(this.name)
    }
  }

  const s = new Subject()
  const o1 = new Observe('张三')
  const o2 = new Observe('李四')
  s.add(o1, o2)
  s.setState(1)
  console.log(s)
</script>
</body>
</html>
